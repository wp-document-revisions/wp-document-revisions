!function(e,t,o,n,r,s){const{registerBlockType:a,createBlock:d}=wp.blocks,{createElement:l}=wp.element,{InspectorControls:u}=wp.blockEditor,{PanelBody:m,RadioControl:p,RangeControl:c,TextControl:w,TextareaControl:f,ToggleControl:h}=wp.components,{__:_}=wp.i18n;a("wp-document-revisions/documents-shortcode",{title:_("Documents List","wp-document-revisions"),description:_("Display a list of documents.","wp-document-revisions"),category:"wpdr-category",icon:"editor-ul",attributes:{header:{type:"string",default:""},taxonomy_0:{type:"string",default:""},term_0:{type:"number",default:0},taxonomy_1:{type:"string",default:""},term_1:{type:"number",default:0},taxonomy_2:{type:"string",default:""},term_2:{type:"number",default:0},numberposts:{type:"number",default:5},orderby:{type:"string"},order:{type:"string",default:"ASC"},show_edit:{type:"string",default:""},show_thumb:{type:"boolean",default:!1},show_descr:{type:"boolean",default:!0},show_pdf:{type:"boolean",default:!1},new_tab:{type:"boolean",default:!0},freeform:{type:"string",default:""},align:{type:"string"},backgroundColor:{type:"string"},linkColor:{type:"string"},textColor:{type:"string"},gradient:{type:"string"},fontSize:{type:"string"},style:{type:"object"}},supports:{align:!0,color:{gradients:!0,link:!0},spacing:{margin:!0,padding:!0},typography:{fontSize:!0,lineHeight:!0}},edit(e){const t=e.attributes,o=e.setAttributes;var n=wpdr_data.taxos;function r(e,t,o){for(i=0;i<wpdr_data.stmax;i++)if(i!=e&&t===n[i].query){var r=n[i].terms;for(j=0,lenj=r.length;j<lenj;j++)if(o===r[j][0])return t+'="'+r[j][2]+'"';return t+'="??"'}return t+'="???"'}function a(e){var r=n[e].terms,i=[];for(j=0,lenj=r.length;j<lenj;j++)i.push({label:r[j][1],value:r[j][0]});return 0==e?(o({taxonomy_0:n[0].query}),l(m,{title:_("Taxonomy: ","wp-document-revisions")+n[0].label,initialOpen:!1},[l(p,{label:n[0].label,selected:t.term_0,options:i,onChange:function(e){o({term_0:parseInt(e)})}})])):1==e?(o({taxonomy_1:n[1].query}),l(m,{title:_("Taxonomy: ","wp-document-revisions")+n[1].label,initialOpen:!1},[l(p,{label:n[1].label,selected:t.term_1,options:i,onChange:function(e){o({term_1:parseInt(e)})}})])):2==e?(o({taxonomy_2:n[2].query}),l(m,{title:_("Taxonomy: ","wp-document-revisions")+n[2].label,initialOpen:!1},[l(p,{label:n[2].label,selected:t.term_2,options:i,onChange:function(e){o({term_2:parseInt(e)})}})])):void 0}return wpdr_data.stmax>0&&""!==t.taxonomy_0&&t.taxonomy_0!==n[0].query&&(o({freeform:t.freeform+" "+r(0,t.taxonomy_0,t.term_0)}),o({taxonomy_0:n[0].query}),o({term_0:0})),wpdr_data.stmax>1&&""!==t.taxonomy_1&&t.taxonomy_1!==n[1].query&&(o({freeform:t.freeform+" "+r(1,t.taxonomy_1,t.term_1)}),o({taxonomy_1:n[1].query}),o({term_1:0})),wpdr_data.stmax>2&&""!==t.taxonomy_2&&t.taxonomy_2!==n[2].query&&(o({freeform:t.freeform+" "+r(2,t.taxonomy_2,t.term_2)}),o({taxonomy_2:n[2].query}),o({term_2:0})),l("div",{},[l(s,{block:"wp-document-revisions/documents-shortcode",attributes:t}),l(u,{},[l(w,{type:"string",value:t.header,label:_("Block Heading","wp-document-revisions"),onChange:function(e){o({header:e})}}),function(){if(0==wpdr_data.stmax)return l("p",{},_("There are no taxonomies defined.","wp-document-revisions"));for(var e=[],t=0;t<wpdr_data.stmax;t++)e.push(a(t));return e}(),l(m,{title:_("Display Settings","wp-document-revisions"),initialOpen:!1},[l(c,{value:t.numberposts,label:_("Number of documents to display","wp-document-revisions"),onChange:function(e){o({numberposts:parseInt(e)})},min:1,step:1}),l(w,{type:"string",value:t.orderby,label:_("List ordering Field","wp-document-revisions"),help:_("Example fields are post_title, post_date and post_modified.","wp-document-revisions"),onChange:function(e){o({orderby:e})}}),l(p,{label:_("Order sequence"),selected:t.order,options:[{label:_("Ascending","wp-document-revisions"),value:"ASC"},{label:_("Descending","wp-document-revisions"),value:"DESC"}],onChange:function(e){o({order:e})}}),l(p,{label:_("Show Edit link","wp-document-revisions"),help:_("Show Edit link allows the list to have a link to the Edit function. A choice made here will over-ride the system-configured settings. Links will only appear if the user can edit the document.","wp-document-revisions"),selected:t.show_edit,options:[{label:_("Default","wp-document-revisions"),value:""},{label:_("No Edit link","wp-document-revisions"),value:"0"},{label:_("Edit link","wp-document-revisions"),value:"1"}],onChange:function(e){o({show_edit:e})}}),l(h,{type:"boolean",checked:t.show_thumb,label:_("Show featured image?","wp-document-revisions"),onChange:function(e){o({show_thumb:e})}}),l(h,{type:"boolean",checked:t.show_descr,label:_("Show document description?","wp-document-revisions"),onChange:function(e){o({show_descr:e})}}),l(h,{type:"boolean",checked:t.show_pdf,label:_("Show PDF File indication?","wp-document-revisions"),onChange:function(e){o({show_pdf:e})}}),l(h,{type:"boolean",checked:t.new_tab,label:_("Open documents in new tab?","wp-document-revisions"),help:_("Setting this on will open the document in a new tab. This should be set on whilst editing the page using this block as clicking on a link whilst editing will force the current page to be left.","wp-document-revisions"),onChange:function(e){o({new_tab:e})}})]),l(m,{title:_("Free Form Settings","wp-document-revisions"),initialOpen:!1},[l(f,{type:"string",rows:8,value:t.freeform,label:_("Free-form parameters","wp-document-revisions"),help:_("The query parameters can be very extensive. enter any other parameters required here.","wp-document-revisions"),onChange:function(e){o({freeform:e})}})])])])},save:()=>null,transforms:{from:[{type:"block",blocks:["core/shortcode"],isMatch:function({text:e}){return/^\[?documents\b\s*/.test(e)},transform:({text:e})=>{var t="",o=0,n="",r=0,i="",s=0,a=5,l="",u="",m="",p=!1,c=!0,w=!1,f=!0,h="",_=e.toLowerCase();0==_.indexOf("[")&&(_=_.slice(1,_.length-1));var y=_.split(" ");y.shift();var b,g=wpdr_data.taxos,v=wpdr_data.wf_efpp;function x(e,t){var o=g[e].terms,n=t.replace(/_/g,"-");for(j=0,lenj=o.length;j<lenj;j++)if(t===o[j][2]||n===o[j][2])return o[j][0];return 0}for(b of y)if(0!==b.length){var k=!1,C=b.split("=");C.length>1&&(0===C[1].indexOf("'")||0===C[1].indexOf('"'))&&(C[1]=C[1].slice(1,C[1].length-1)),"1"===v&&"workflow_state"===C[0]&&(C[0]="post_status"),wpdr_data.stmax>0&&C[0]===g[0].query&&(t=C[0],o=x(0,C[1]),k=!0),wpdr_data.stmax>1&&C[0]===g[1].query&&(n=C[0],r=x(1,C[1]),k=!0),wpdr_data.stmax>2&&C[0]===g[2].query&&(i=C[0],s=x(2,C[1]),k=!0),"number"===C[0]&&(a=Number(C[1]),k=!0),"numberposts"===C[0]&&(a=Number(C[1]),k=!0),"orderby"===C[0]&&(l=C[1],k=!0),"order"===C[0]&&(u=C[1].toUpperCase(),k=!0),"show_edit"===C[0]&&(m=C[1],k=!0),"show_thumb"===C[0]&&(1!==C.length&&"true"!==C[1]||(p=!0),k=!0),"show_descr"===C[0]&&(2===C.length&&"false"===C[1]&&(c=!1),k=!0),"show_pdf"===C[0]&&(1!==C.length&&"true"!==C[1]||(w=!0),k=!0),"new_tab"===C[0]&&(2===C.length&&"false"===C[1]&&(f=!1),k=!0),0==k&&(h+=" "+b)}return d("wp-document-revisions/documents-shortcode",{header:"",taxonomy_0:t,term_0:o,taxonomy_1:n,term_1:r,taxonomy_2:i,term_2:s,numberposts:a,orderby:l,order:u,show_edit:m,show_thumb:p,show_descr:c,show_pdf:w,new_tab:f,freeform:h.trim()})}}],to:[{type:"block",blocks:["core/shortcode"],transform:e=>{var t=wpdr_data.taxos;function o(e,o){var n=t[e].terms;for(j=0,lenj=n.length;j<lenj;j++)if(o===n[j][0])return'"'+n[j][2]+'"';return"??"}function n(e,n){if(""!==e&&0!=n){var i;for(i in[0,1,2])if(e===t[i].query)return void(r+=" "+e+"="+o(i,n));r+=" "+e+"="+n}}var r="[documents ";return n(e.taxonomy_0,e.term_0),n(e.taxonomy_1,e.term_1),n(e.taxonomy_2,e.term_2),""!==e.numberposts&&(r+=' numberposts="'+e.numberposts+'"'),void 0!==e.orderby&&""!==e.orderby&&(r+=' orderby="'+e.orderby+'"'),""!==e.order&&void 0!==e.orderby&&""!==e.orderby&&(r+=' order="'+e.order+'"'),""!==e.show_edit&&(r+=' show_edit="'+e.show_edit+'"'),e.show_thumb&&(r+=" show_thumb"),e.show_descr&&(r+=" show_descr"),e.show_pdf&&(r+=" show_pdf"),e.new_tab&&(r+=" new_tab"),""!==e.freeform&&void 0!==e.freeform&&(r+=" "+e.freeform),d("core/shortcode",{text:r+=" ]"})}}]}})}(window.wp.blocks,window.wp.element,window.wp.blockEditor,window.wp.components,window.wp.compose,window.wp.serverSideRender,window.wp.i18n);